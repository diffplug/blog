plugins {
	id "com.diffplug.gradle.spotless" version "1.3.2"
}

////////////
// FORMAT //
////////////
// apply formatting in the root project so that we get formatting for our README, project files, etc
apply plugin: 'com.diffplug.gradle.spotless'
spotless {
	java {
		target '**/*.java'
		licenseHeaderFile	'spotless.license.javaheader'	// License header file
		importOrderFile		'spotless.importorder'			// An import ordering file, exported from Eclipse
		eclipseFormatFile	'spotless.eclipseformat.xml'	// XML file dumped out by the Eclipse formatter
		// Eclipse formatter puts excess whitespace after lambda blocks
		//    funcThatTakesLambdas(x -> {} , y -> {} )	// what Eclipse does
		//    funcThatTakesLambdas(x -> {}, y -> {})	// what I wish Eclipse did
		custom 'Lambda fix', { it.replace('} )', '})').replace('} ,', '},') }
	}
	format 'misc', {
		target '**/.gitignore', '**/*.gradle', '**/*.md', '**/*.sh'
		indentWithTabs()
		trimTrailingWhitespace()
		endWithNewline()
	}
	freshmark {}
}
